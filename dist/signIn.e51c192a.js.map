{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4CAIa;AAJb;AACA;;AACA;AAEO,MAAM,SAAS;IACpB,MAAM,OAAO,IAAI,CAAA,GAAA,qBAAe,AAAD,EAG5B,CAAC,mBAAmB,CAAC;IAExB,MAAM,YAAY,KAAK,mBAAmB,CACxC,CAAC,sBAAsB,CAAC;IAG1B,UAAU,EAAE,CAAC,SAAS;QACpB,CAAA,GAAA,uBAAQ,AAAD,EAAE,IAAI,CAAC,eAAe,CAAC;YAC5B,UAAU;YACV,SAAS;gBACP,YAAY,CAAA,GAAA,6BAAqB,AAAD;YAClC;QACF;IACF;IAEA,KAAK,YAAY,CAAC,CAAC;QACjB,KAAK,QAAQ;QAEb,KAAK,WAAW;QAChB,KAAK,sBAAsB,CAAC;QAE5B,CAAA,GAAA,uBAAQ,AAAD,EAAE,IAAI,CACV,kBAAkB,CAAC;YAClB,OAAO,KAAK,KAAK;YACjB,UAAU,KAAK,QAAQ;QACzB,GACC,IAAI,CAAC,CAAC;YACL,IAAI,KAAK,KAAK,EAAE;gBACd,KAAK,oBAAoB,CAAC;oBACxB,OACE,KAAK,KAAK,CAAC,OAAO,IAClB;gBACJ;gBACA,KAAK,cAAc;gBACnB,KAAK,sBAAsB,CAAC;gBAC5B;YACF;YAEA,KAAK,sBAAsB,CAAC;YAC5B,CAAA,GAAA,cAAQ,AAAD,EAAE;QACX,GACC,KAAK,CAAC,CAAC;YACN,KAAK,oBAAoB,CAAC;gBACxB,OACE,IAAI,OAAO,IACX;YACJ;YACA,KAAK,cAAc;YAEnB,KAAK,sBAAsB,CAAC;QAC9B,GACC,OAAO,CAAC;YACP,KAAK,UAAU;QACjB;IACJ;AACF;;;;;2DC/Da;AAAN,MAAM,wBAAwB,CAAC,EAAE,SAAS,QAAQ,CAAC,EAAE,EAAE,SAAS,IAAI,CAAC,YAAY,CAAC","sources":["src/modules/auth/signIn.ts","src/config/index.ts"],"sourcesContent":["import { WFFormComponent, navigate } from \"@xatom/core\";\nimport supabase from \"../supbase\";\nimport { SUPABASE_REDIRECT_URL } from \"../../config\";\n\nexport const signIn = () => {\n  const form = new WFFormComponent<{\n    email: string;\n    password: string;\n  }>(`[xa-type=main-form]`);\n\n  const googleBtn = form.getChildAsComponent(\n    `[xa-type=\"google-btn\"]`\n  );\n\n  googleBtn.on(\"click\", () => {\n    supabase.auth.signInWithOAuth({\n      provider: \"google\",\n      options: {\n        redirectTo: SUPABASE_REDIRECT_URL,\n      },\n    });\n  });\n\n  form.onFormSubmit((data) => {\n    form.showForm();\n\n    form.disableForm();\n    form.updateSubmitButtonText(\"Please wait...\");\n\n    supabase.auth\n      .signInWithPassword({\n        email: data.email,\n        password: data.password,\n      })\n      .then((data) => {\n        if (data.error) {\n          form.updateTextViaAttrVar({\n            error:\n              data.error.message ||\n              \"Unable to login please try again\",\n          });\n          form.showErrorState();\n          form.updateSubmitButtonText(\"Login\");\n          return;\n        }\n\n        form.updateSubmitButtonText(\"Redirecting...\");\n        navigate(\"/dashboard/task-list\");\n      })\n      .catch((err) => {\n        form.updateTextViaAttrVar({\n          error:\n            err.message ||\n            \"Unable to login please try again\",\n        });\n        form.showErrorState();\n\n        form.updateSubmitButtonText(\"Login\");\n      })\n      .finally(() => {\n        form.enableForm();\n      });\n  });\n};\n","export const SUPABASE_REDIRECT_URL = `${location.protocol}//${location.host}/auth/verify`;\n"],"names":[],"version":3,"file":"signIn.e51c192a.js.map","sourceRoot":"../"}